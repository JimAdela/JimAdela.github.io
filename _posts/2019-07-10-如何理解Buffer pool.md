---
layout:     post
title:      如何理解Buffer pool
subtitle:   Buffer pool
date:       2019-07-10
author:     WY
header-img: img/post-bg-os-metro.jpg
catalog: true
tags:
    - MySQL
---

### 作用

**`Buffer poll`又名`缓冲池`,顾名思义它的作用就是为了缓存常用的数据,以减少对磁盘`IO`的操作.**



### 缓存的流程

**那么`MySQL`当中,以`InnoDB`为存储表引擎的数据包括索引都是以`页`的形式存储在表空间当中,而表空间只是对文件系统文件的抽象,实际还是存在磁盘当中,因而当`InnoDB`存储引擎处理来自客户端的数据请求时,它会向操作系统请求一片内存空间,把请求页的数据临时加载到内存中,读写完成后并不急于将该空间释放,而是将其缓存起来,这样当再次请求改页面数据时,就能节省磁盘`IO`的开销.**



### Buffer pool内部构成

**`Buffer pool`	内部不仅维护着缓存页,还同时维护着`free`链表和`flush`链表,`free`链表是用来记录`Buffer pool`中有哪些缓存页是空还是非空的,它解决了从磁盘上读取一个页应当存放到`Buffer pool`中的哪个空间的问题.`flush`链表是用来解决同步数据的问题,每当我们修改了缓存页中的数据,它与磁盘数据不一致时,我们就需要更新磁盘数据以保持数据的一致性,但频繁的往磁盘写数据会影响程序性能,因此可以暂时不同步,而是未来的时间点进行同步.而同步哪些数据就由`flush`链表来维护.**

​	

### LRU链表

**`Buffer pool`中没有空闲缓存页时,就需要清空很少使用的缓存页,而`LRU`链表,它将缓存命中率高的热点数据都存放在链表头部,留下的尾部则都是需要清除的缓存页.**